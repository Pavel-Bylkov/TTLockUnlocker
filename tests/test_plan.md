чек-лист для тестирования проекта TTLockUnlocker:

---

## 1. **Подготовка окружения**

**1.1. Остановите все старые контейнеры:**
```bash
docker-compose down
```

**1.2. Очистите старые логи (по желанию):**
```bash
rm -rf logs/*
```

**1.3. Проверьте и при необходимости отредактируйте файлы:**
- `env/.env` — все переменные заполнены корректно.
- `config.json` — расписание, перерывы, часовой пояс.
- Папки `logs`, `env` существуют и имеют нужные права.

---

## 2. **Сборка и запуск контейнеров**

**2.1. Соберите и запустите проект:**
```bash
make start
# или
docker-compose up --build -d
```

**2.2. Проверьте, что оба контейнера работают:**
```bash
docker ps
```
Ожидаете увидеть `auto_unlocker_1` и `telegram_bot_1` в статусе "Up".

---

## 3. **Проверка логов**

**3.1. Убедитесь, что логи пишутся:**
```bash
tail -n 20 logs/auto_unlocker.log
tail -n 20 logs/telegram_bot.log
```

---

## 4. **Запуск и проверка юнит-тестов**

**4.1. Запустите все тесты:**
```bash
make test
# или
pytest
```

**4.2. (Опционально) Получите покрытие тестами:**
```bash
pip install pytest-cov
pytest --cov=.
```
Убедитесь, что все тесты проходят успешно и покрытие высокое.

---

## 5. **Проверка работы Telegram-бота**

**5.1. Откройте Telegram и найдите своего бота.**

**5.2. Проверьте команды:**

- `/menu` — должен вывести список всех команд.
- `/status` — должен показать статус расписания, время открытия, перерывы.
- `/logs` — последние строки из логов сервиса (дни недели на русском).
- `/setchat` — смена получателя уведомлений (проверьте с кодовым словом).
- `/enable_schedule` и `/disable_schedule` — включение/отключение расписания, убедитесь, что сервис перезапускается.
- `/settimezone` — смена часового пояса (например, на Europe/Moscow).
- `/settime` — изменение времени открытия для любого дня.
- `/setbreak` — добавление/удаление перерывов.
- `/open` и `/close` — ручное открытие/закрытие замка (если lock_id задан и TTLock API доступен).

**5.3. Проверьте, что бот корректно реагирует на неавторизованные chat_id (если попробуете с другого аккаунта).**

---

## 6. **Проверка автоматизации**

**6.1. Проверьте, что auto_unlocker автоматически открывает замок по расписанию (можно временно выставить ближайшее время для теста).**

**6.2. Убедитесь, что уведомления приходят в Telegram при срабатывании событий.**

---

## 7. **Проверка перезапуска контейнеров**

**7.1. После команд `/enable_schedule` и `/disable_schedule` убедитесь, что контейнер auto_unlocker реально перезапускается:**
```bash
docker ps -a
```
Проверьте время аптайма контейнера.

---

## 8. **Проверка ошибок**

**8.1. Введите заведомо неверные значения (например, неверный формат времени, неправильное кодовое слово) и убедитесь, что бот корректно сообщает об ошибке.**

---

## 9. **Финальная проверка**

- Убедитесь, что все команды работают стабильно.
- Логи не содержат неожиданных ошибок.
- Все изменения в файлах сохранены и закоммичены (если используете git).

---

### **Если что-то не работает:**
- Проверьте логи контейнеров.
- Проверьте права на файлы и папки.
- Проверьте переменные окружения.

---

